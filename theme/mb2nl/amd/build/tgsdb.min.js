/**
 *
 * @package   theme_mb2nl
 * @copyright 2017 - 2022 Mariusz Boloz (https://lmsstyle.com)
 * @license   PHP and HTML: http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later. Other parts: http://themeforest.net/licenses
 */ define(["jquery","theme_mb2nl/userpreference","theme_mb2nl/morelessbtn","core/ajax","core/notification"],function(e,t,a,s,o){"use strict";let d=e("#page");var n=function(){e(document).on("click",".tgsdb_btn",function(){e("body").hasClass("tgsdb_open")?(e("body").removeClass("tgsdb_open"),e(this).attr("aria-expanded","false"),t.sePreference("mb2_tgsdb",0)):(e("body").addClass("tgsdb_open"),e(this).attr("aria-expanded","true"),t.sePreference("mb2_tgsdb",1)),e("body").hasClass("tgsdb_mopen")?e("body").removeClass("tgsdb_mopen"):e("body").addClass("tgsdb_mopen")}),e(document).on("click",".tgsdb-btn",function(){var s=e(this).attr("data-id"),o=e(this).attr("aria-controls");e(".tgsdb-btn").removeClass("active"),e(".tgsdb-btn").attr("aria-expanded","false"),e(".tgsdb-section").removeClass("active"),e(".toggle-sidebar").attr("data-tgsdb_active",s),e(this).addClass("active"),e(this).attr("aria-expanded","true"),e("#"+o).addClass("active"),"chome"===s&&a.init(),t.sePreference("mb2_tgsdbactv",s)}),r(),e(window).on("scroll",function(){r()}),e(window).on("resize",function(){r()})},r=function(){if(!e("body").hasClass("tgsdb"))return null;var t=e("#fsmod-header").length?e("#fsmod-header"):e(".header-inner2"),a=992>=e(window).width(),s=e("body").hasClass("theme-lfx")&&!a,o=t.offset().top,d=e("#fsmod-header").length?t.outerHeight():t.outerHeight()+o,n=a&&!e("body").hasClass("eopn1")?0:mb2nljs.headerhsm,r=e(".toggle-sidebar"),i=e(window).scrollTop();s&&(d=e(".sliding-panel").length?e(".sliding-panel").outerHeight():0,n=0);var l=Math.ceil(d-i)>n?Math.ceil(d-i):n;r.css("--tgsdb_cheight",l+"px")};let i=t=>{let n=e(".course-sidebar-home");(e=>{let t={courseid:e,playout:d.attr("data-playout"),ptype:d.attr("data-ptype"),section:d.attr("data-uparam_section")};return s.call([{methodname:"theme_mb2nl_course_chome",args:t}])[0]})(t).then(e=>{n.append(e.chome),a.init()}).catch(o.exception)};return{init:n,tgsdbTopPos:r,loadChome:i}});