/**
 *
 * @package   theme_mb2nl
 * @copyright 2017 - 2024 Mariusz Boloz (lmsstyle.com)
 * @license   PHP and HTML: http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later. Other parts: http://themeforest.net/licenses
 */ define(["jquery","core/ajax","core/notification","core/str"],function(e,t,n,a){var i=function(t){e(".mb2-pb-events-items.active").append(t.event),d(t.eventid)},o=function(){var e="";return e+='<div id="mb2-pb-events-modal" class="modal theme-modal theme-forms fade" role="dialog" tabindex="0" aria-labelledby="mb2-pb-events-modal" aria-describedby="mb2-pb-events-modal" aria-modal="true">',e+='<div class="modal-dialog modal-md" role="document">',e+='<div class="modal-content">',e+='<div class="theme-modal-container">',e+='<button class="close-container themereset" data-dismiss="modal" title="'+M.util.get_string("closebuttontitle")+'">&times;</button>',e+='<div class="event-modal-content"></div>',e+="</div>",e+='<button class="themereset themekeynavonly" data-dismiss="modal">'+M.util.get_string("closebuttontitle")+"</button>",e+="</div>",e+="</div>",e+="</div>",e+="</div>"},d=function(t){var n=e(".mb2-pb-events-items.active").find(".event-item-"+t).clone();e("#mb2-pb-events-modal").find(".event-modal-content").append(n),e(".mb2-pb-events-items").removeClass("active"),setTimeout(function(){e("#mb2-pb-events-modal").removeClass("loading")},600)};return{eventDetails:function(){e(document).on("click",".event-show",function(a){var s=e(this),l=s.closest(".event-item").attr("data-id"),m=s.closest(".mb2-pb-events").find(".mb2-pb-events-items"),v=m.find(".event-item-"+l);a.preventDefault(),m.addClass("active"),e("#mb2-pb-events-modal").length?e("#mb2-pb-events-modal").find(".event-modal-content").html(""):e("body").append(o()),e("#mb2-pb-events-modal").modal("show"),v.length?d(l):(e("#mb2-pb-events-modal").addClass("loading"),t.call([{methodname:"theme_mb2nl_event_details",args:{eventid:l},done:function(e){i(e)},fail:n.exception}]))})}}});